var googleMap=function(n,t,i){function e(){if(typeof google=="object"&&typeof google.maps=="object")googleMap.apiCallback();else{var i=t.createElement("script");i.type="text/javascript";i.src="https://maps.googleapis.com/maps/api/js?callback=googleMap.apiCallback&key="+n.googleMapSettings.apiKey;t.body.appendChild(i)}}function s(){i.each(r,function(){o(this)})}function h(){i(t).on("ContainerLoaded",".Container.GoogleMap",function(){r.length===0?(u(i(this)),e()):f.addElement(i(this))})}function u(n){var t=i(".Map-Container",n),u=JSON.parse(t.attr("data-settings"));r.push({element:t,settings:u,markers:l(t)})}function c(){i("div[data-containertype='GoogleMap']").each(function(){u(this)})}function l(n){var t=[];return i("map-marker",n).each(function(){t.push({latitude:i(this).attr("data-latitude"),longtitude:i(this).attr("data-longtitude"),icon:i(this).attr("data-icon"),text:i(this).html(),primary:i(this).attr("data-primary")})}),t}function o(n){var f=n.element,r=n.settings,h=i(f).attr("data-latitude"),c=i(f).attr("data-longtitude"),e=i(f).attr("data-zoomlevel"),o=new google.maps.LatLngBounds,s={center:new google.maps.LatLng(h,c),zoom:parseInt(e),zoomControl:r.ShowZoomControl,mapTypeControl:r.ShowMapTypeControl,scaleControl:r.ShowScaleControl,streetViewControl:r.ShowStreetViewControl,scrollwheel:r.EnableScrollWheel,draggable:r.EnableDraggable,keyboardShortcuts:!1},u=!0,t;e!=="-1"&&(u=!1);i.each(n.markers,function(){if(this.primary==="True")return u=!1,!1});n.markers.length===1&&u===!0&&(s.zoom=12,u=!1);t=new google.maps.Map(i(f)[0],s);i.each(n.markers,function(i){var f=new google.maps.InfoWindow({content:'<div class="google-map-bubble">'+this.text+"<\/div>"}),r=new google.maps.Marker({position:new google.maps.LatLng(this.latitude,this.longtitude),map:t,icon:this.icon});this.text!="undefined"&&this.text!=null&&this.text!=""&&(r.addListener("click",function(){f.open(t,r)}),n.settings.ShowBubble&&f.open(t,r));u?o.extend(r.position):(i===0&&t.setCenter(r.position),this.primary==="True"&&t.setCenter(r.position))});u&&t.fitBounds(o);n.markers.length===0&&(t.setCenter({lat:55.6273103,lng:10.3461592}),t.zoom=6)}var r=[],f={init:function(){h();c();r.length>0&&e()},apiCallback:function(){s()},addElement:function(n){u(n);o(r[r.length-1])}};return f}(window,document,jQuery);$(document).ready(function(){googleMap.init()})